.row
  .col-xs-12
    %h1= %(Details of product "#{@product.name}")
    %h4 Price
    %p= humanized_money_with_symbol @product.price
    %h4 Tags
    %table.table
      %thead
        %tr
          %th Title
          %th Usage
          %th
      %tbody
        - @product.taggings.includes(:tag).each do |tagging|
          - tag = tagging.tag
          %tr
            %td= tag.title
            %td= "Used in #{tag.usage_count} products"
            %td
              = link_to 'remove', tagging_path(tagging), class: 'btn btn-default', method: :delete

    %p
      = link_to 'edit', edit_product_path(@product), class: 'btn btn-default'
      = link_to 'delete', product_path(@product), class: 'btn btn-default', method: :delete
      = link_to 'index', products_path(@product), class: 'btn btn-default'

%h4 New Tag
= simple_form_for([@product, Tag.new]) do |f|
  = f.error_notification
  .form-inputs
    = f.input :title

  .form-actions
    = f.button :submit
